@model IEnumerable<OverviewTicketViewModel>
@{
	ViewData["Title"] = "View Tickets";
}

<h2>@ViewData["Title"]</h2>
@if (Model != null)
{
	@foreach (var ticket in Model.OrderByDescending(t => t.SubmissionDate))
	{
		<div class="container">
			<div class="row">
				<div class="col-md-9">
					<div class="wrapper wrapper-content animated fadeInUp">
						<div class="ibox">
							<div class="ibox-content">
								<div class="row">
									<div class="col-lg-12">
										<div class="m-b-md">
											<a href="#" class="btn btn-primary btn-xs pull-right">View ticket</a>
											@if (!User.IsInRole("Client"))
											 {
												<a href="#" class="btn btn-warning btn-xs pull-right">Edit ticket</a>
												<a href="#" class="btn btn-danger btn-xs pull-right">Delete ticket</a>
											 }

											<h2>@ticket.Title</h2>
										</div>
										<dl class="dl-horizontal">
											<dt>Status:</dt>
											<dd><span class="label label-primary">@ticket.TicketState</span></dd>
										</dl>
									</div>
								</div>
								<div class="row">
									<div class="col-lg-5">
										<dl class="dl-horizontal">
											<dt>Created by:</dt>
											<dd>@ticket.SumitterName</dd>
											<dt>From Project:</dt>
											<dd>@ticket.ProjectName</dd>
										</dl>
									</div>
									<div class="col-lg-7" id="cluster_info">
										<dl class="dl-horizontal">
											<dt>Created On:</dt>
											<dd>@ticket.SubmissionDate.ToShortDateString()</dd>
											<dt>Messages:</dt>
											<dd>@ticket.MessagesCount</dd>
										</dl>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	}
}